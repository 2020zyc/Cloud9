<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><title>Cloud9: A MapReduce Library for Hadoop :: Getting started in standalone mode</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="../style.css" type="text/css" />
</head>

<body>

<center><table width="80%"><tbody><tr><td align="left">

<h2>Cloud<sup><small>9</small></sup>: Getting started in standalone mode</h2>

<p>by Jimmy Lin</p>

<p>
<small>(Page first created: 31 May 2009; last updated:
<script language="JavaScript" type="text/javascript">
<!--
var LastUpdated = "$Date$";
LastUpdated = LastUpdated.substring(LastUpdated.length-14, LastUpdated.length-3);
document.writeln (LastUpdated);
-->
</script>)
</small>
</p>

<div class="main">

<h3>Introduction</h3>

<p>This tutorial will get you started with
Cloud<sup><small>9</small></sup> in standalone mode.  In standalone
mode, you run Hadoop directly on your local machine.  Of course, you
don't get the benefit of distributing your code across multiple
machines... but it's a good start for learning about Hadoop.  This
tutorial assumes you've already downloaded
Cloud<sup><small>9</small></sup> and gotten it set up.  Otherwise, see
<a href="start.html">my tutorial on that</a>.  Also, see companion
tutorial on <a href="start-EC2.html">getting started with
Cloud<sup><small>9</small></sup> on EC2</a>.</p>

<p><b>For Windows users:</b> If you are using Windows,
use <a href="http://www.cygwin.com">Cygwin</a>.  That's what I mean
when I say, "open up a shell".</p>

<h3>Step 1: Configure Hadoop for standalone mode</h3>

<p>This tutorial assumes Hadoop 0.20.1.  Make sure you've downloaded
and unpacked the Hadoop distribution in umd-hadoop-core/hadoop/.
See <a href="start.html">this guide</a> for more details.</p>

<p>Open up a shell and go to
umd-hadoop-core/hadoop/hadoop-0.20.1/conf/.  Make sure the file
core-site.xml doesn't actually specify configuration parameters:</p>

<pre>
&lt;?xml version="1.0"?&gt;
&lt;?xml-stylesheet type="text/xsl" href="configuration.xsl"?&gt;

&lt;!-- Put site-specific property overrides in this file. --&gt;

&lt;configuration&gt;

&lt;/configuration&gt;
</pre>

<p>Verify the same for hdfs-site.xml and mapred-site.xml.  This should
be the case for a clean distribution.  This configuration ensures that
your Hadoop now runs in standalone mode.</p>

<p>Later on you will actually specify configuration parameters here to
connect to a cluster.  In that case, you can override those parameters
and force standalone mode from the command line.  Like this:</p>

<pre>
hadoop fs -D mapred.job.tracker=local -D fs.default.name=file:/// -ls .
</pre>

<p>The above example performs a directory listing in standalone mode
(which corresponds to a directory listing of the local disk).</p>

<h3>Step 2: Run pi</h3>

<p>Open a shell and go to umd-hadoop-core/hadoop/hadoop-0.20.1/. Now
run the pi demo:</p>

<pre>
$ bin/hadoop jar hadoop-0.20.1-examples.jar pi 10 100
Number of Maps  = 10
Samples per Map = 100
Wrote input for Map #0
Wrote input for Map #1
Wrote input for Map #2
Wrote input for Map #3
Wrote input for Map #4
Wrote input for Map #5
Wrote input for Map #6
Wrote input for Map #7
Wrote input for Map #8
Wrote input for Map #9
Starting Job
[...]
09/11/18 19:51:57 INFO mapred.JobClient: Job complete: job_local_0001
09/11/18 19:51:57 INFO mapred.JobClient: Counters: 13
09/11/18 19:51:57 INFO mapred.JobClient:   FileSystemCounters
09/11/18 19:51:57 INFO mapred.JobClient:     FILE_BYTES_READ=1725357
09/11/18 19:51:57 INFO mapred.JobClient:     FILE_BYTES_WRITTEN=1926195
09/11/18 19:51:57 INFO mapred.JobClient:   Map-Reduce Framework
09/11/18 19:51:57 INFO mapred.JobClient:     Reduce input groups=20
09/11/18 19:51:57 INFO mapred.JobClient:     Combine output records=0
09/11/18 19:51:57 INFO mapred.JobClient:     Map input records=10
09/11/18 19:51:57 INFO mapred.JobClient:     Reduce shuffle bytes=0
09/11/18 19:51:57 INFO mapred.JobClient:     Reduce output records=0
09/11/18 19:51:57 INFO mapred.JobClient:     Spilled Records=40
09/11/18 19:51:57 INFO mapred.JobClient:     Map output bytes=180
09/11/18 19:51:57 INFO mapred.JobClient:     Map input bytes=240
09/11/18 19:51:57 INFO mapred.JobClient:     Combine input records=0
09/11/18 19:51:57 INFO mapred.JobClient:     Map output records=20
09/11/18 19:51:57 INFO mapred.JobClient:     Reduce input records=20
Job Finished in 2.625 seconds
Estimated value of Pi is 3.14800000000000000000
</pre>

<p>Okay, so the value of pi is a bit off... but at least Hadoop
works!</p>

<h3>Step 3: Unpack some data and build the job jar</h3>

<p>Now we're getting ready to run the word count demo.  Open a shell
and go to umd-hadoop-core/data/.  Uncompress the sample text
collection (Bible and the complete works of Shakespeare):</p>

<pre>
$ gunzip bible+shakes.nopunc.gz
</pre>

<p>Now let's build a job jar for running the word count demo.  Open a
shell and go to umd-hadoop-core/build/ (which is where
Eclipse automatically puts compiled class files).  Jar up the class
files:</p>

<pre>
$ jar cvf cloud9.jar *
</pre>

<p>If there's nothing in build/, go back to Eclipse and make sure the
code compiles without error.</p>

<h3>Step 4: Build and run the word count demo</h3>

<p>Once you have created the jar, go back to
umd-hadoop-core/hadoop/hadoop-0.20.1/ and submit the job in standalone
mode.  Run the class to find out its command-line arguments:</p>

<pre>
$ bin/hadoop jar ../../build/cloud9.jar edu.umd.cloud9.demo.DemoWordCount
usage: [input-path] [output-path] [num-mappers] [num-reducers]
</pre>

<p>Now run the code with on the sample text collection:</p>

<pre>
$ bin/hadoop jar ../../build/cloud9.jar edu.umd.cloud9.demo.DemoWordCount ../../data/bible+shakes.nopunc demo 5 1
09/11/18 19:53:18 INFO demo.DemoWordCount: Tool: DemoWordCount
09/11/18 19:53:18 INFO demo.DemoWordCount:  - input path: ../../data/bible+shakes.nopunc
09/11/18 19:53:18 INFO demo.DemoWordCount:  - output path: demo
09/11/18 19:53:18 INFO demo.DemoWordCount:  - number of mappers: 5
09/11/18 19:53:18 INFO demo.DemoWordCount:  - number of reducers: 1
[...]
09/11/18 19:53:25 INFO mapred.JobClient: Job complete: job_local_0001
09/11/18 19:53:25 INFO mapred.JobClient: Counters: 13
09/11/18 19:53:25 INFO mapred.JobClient:   FileSystemCounters
09/11/18 19:53:25 INFO mapred.JobClient:     FILE_BYTES_READ=22537334
09/11/18 19:53:25 INFO mapred.JobClient:     FILE_BYTES_WRITTEN=5495288
09/11/18 19:53:25 INFO mapred.JobClient:   Map-Reduce Framework
09/11/18 19:53:25 INFO mapred.JobClient:     Reduce input groups=41788
09/11/18 19:53:25 INFO mapred.JobClient:     Combine output records=128253
09/11/18 19:53:25 INFO mapred.JobClient:     Map input records=156215
09/11/18 19:53:25 INFO mapred.JobClient:     Reduce shuffle bytes=0
09/11/18 19:53:25 INFO mapred.JobClient:     Reduce output records=41788
09/11/18 19:53:25 INFO mapred.JobClient:     Spilled Records=170041
09/11/18 19:53:25 INFO mapred.JobClient:     Map output bytes=15919397
09/11/18 19:53:25 INFO mapred.JobClient:     Map input bytes=9068074
09/11/18 19:53:25 INFO mapred.JobClient:     Combine input records=1820763
09/11/18 19:53:25 INFO mapred.JobClient:     Map output records=1734298
09/11/18 19:53:25 INFO mapred.JobClient:     Reduce input records=41788
09/11/18 19:53:25 INFO demo.DemoWordCount: Job Finished in 7.406 seconds
</pre>

<p>There should now be a new sub-directory in your current directory
called demo/ that contains the output of the word
count demo:</p>

<pre>
$ head demo/part-00000
&amp;c      70
&amp;c'     1
''all   1
''among 1
''and   1
''but   1
''how   1
''lo    2
''look  1
''my    1

$ tail demo/part-00000
zorites 1
zorobabel       3
zounds  20
zuar    5
zuph    3
zur     5
zuriel  1
zurishaddai     5
zuzims  1
zwaggered       1

$ wc demo/part-00000
 41788  83576 447180 demo/part-00000
</pre>

<p>And that's it!  Now you're ready to run a <i>real</i> MapReduce
cluster.</p>

<p style="padding-top: 25px"><a href="../index.html">Back to main page</a></p>

</div>

<table width="100%" border="0" cellpadding="0" cellspacing="0" style="padding-top: 10px;">
<tr><td valign="top" align="left">
</td>
<td valign="top" align="right">
  <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/us/">
  <img src="../images/creative-commons.png" border="0" alt="Creative Commons: Attribution-Noncommercial-Share Alike 3.0 United States"/>
  </a>
  <a href="http://validator.w3.org/check/referer">
  <img src="../images/valid-xhtml10.gif" border="0"
       alt="Valid XHTML 1.0!" height="31" width="88" />
  </a>
  <a href="http://jigsaw.w3.org/css-validator/check/referer">
  <img style="border:0;width:88px;height:31px"
       src="../images/vcss.gif" 
       alt="Valid CSS!" />
  </a>
</td></tr></table>

</td></tr></tbody></table></center>

</body></html>
